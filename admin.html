<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>âš™ï¸ Admin - One Piece Bounty System</title>
  <link rel="stylesheet" href="css/admin.css">
</head>
<body>
  <div class="admin-container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <h2>âš“ ADMIN</h2>
        <p>One Piece System</p>
      </div>
      <nav class="sidebar-nav">
        <button class="nav-item active" data-tab="pirates">
          <span class="nav-icon">ğŸ´â€â˜ ï¸</span>
          <span class="nav-text">Quáº£n lÃ½ Háº£i Táº·c</span>
        </button>
        <button class="nav-item" data-tab="crews">
          <span class="nav-icon">âš”ï¸</span>
          <span class="nav-text">Quáº£n lÃ½ BÄƒng NhÃ³m</span>
        </button>
        <button class="nav-item" data-tab="ranks">
          <span class="nav-icon">ğŸ†</span>
          <span class="nav-text">Quáº£n lÃ½ Cáº¥p Äá»™</span>
        </button>
        <button class="nav-item" data-tab="accounts">
          <span class="nav-icon">ğŸ‘¥</span>
          <span class="nav-text">Quáº£n lÃ½ TÃ i Khoáº£n</span>
        </button>
        <button class="nav-item" data-tab="quests">
          <span class="nav-icon">ğŸ“</span>
          <span class="nav-text">Quáº£n lÃ½ Nhiá»‡m Vá»¥</span>
        </button>
        <button class="nav-item" data-tab="submissions">
          <span class="nav-icon">ğŸ“¸</span>
          <span class="nav-text">Duyá»‡t BÃ i Ná»™p</span>
        </button>
      </nav>
      <div class="sidebar-footer">
        <a href="index.html" class="back-btn">
          <span>ğŸ”™</span> Quay láº¡i trang chÃ­nh
        </a>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Header -->
      <header class="admin-header">
        <h1 id="pageTitle">ğŸ´â€â˜ ï¸ Quáº£n lÃ½ Háº£i Táº·c</h1>
        <div class="header-actions">
          <button class="action-btn export" onclick="exportData()">
            <span>ğŸ“¤</span> Xuáº¥t dá»¯ liá»‡u
          </button>
          <button class="action-btn import" onclick="document.getElementById('importFile').click()">
            <span>ğŸ“¥</span> Nháº­p dá»¯ liá»‡u
          </button>
          <button class="action-btn sync" onclick="syncToCloud()" title="Äá»“ng bá»™ lÃªn Firebase">
            <span>â˜ï¸</span> Sync Cloud
          </button>
          <input type="file" id="importFile" accept=".json" style="display: none;" onchange="importData(event)">
        </div>
      </header>

      <!-- Tab Content: Pirates -->
      <section id="pirates-tab" class="tab-content active">
        <div class="tab-header">
          <div class="search-box">
            <input type="text" id="pirateSearch" placeholder="ğŸ” TÃ¬m kiáº¿m háº£i táº·c..." oninput="searchPirates(this.value)">
          </div>
          <div class="bulk-actions" id="bulkActions" style="display: none;">
            <button class="action-btn delete" onclick="deleteSelectedPirates()">
              <span>ğŸ—‘ï¸</span> XÃ³a Ä‘Ã£ chá»n (<span id="selectedCount">0</span>)
            </button>
          </div>
          <button class="action-btn danger" onclick="deleteAllPirates()" style="margin-left: 10px;">
            <span>ğŸ—‘ï¸</span> XÃ³a Táº¥t Cáº£
          </button>
          <button class="add-btn" onclick="openAddPirateModal()">
            <span>â•</span> ThÃªm Háº£i Táº·c
          </button>
        </div>
        <div class="stats-row">
          <div class="stat-card">
            <span class="stat-icon">ğŸ´â€â˜ ï¸</span>
            <div class="stat-info">
              <span class="stat-value" id="totalPirates">0</span>
              <span class="stat-label">Tá»•ng Háº£i Táº·c</span>
            </div>
          </div>
          <div class="stat-card">
            <span class="stat-icon">ğŸ’°</span>
            <div class="stat-info">
              <span class="stat-value" id="totalBounty">0à¸¿</span>
              <span class="stat-label">Tá»•ng Bounty</span>
            </div>
          </div>
          <div class="stat-card">
            <span class="stat-icon">ğŸ‘‘</span>
            <div class="stat-info">
              <span class="stat-value" id="topRank">-</span>
              <span class="stat-label">Cáº¥p Cao Nháº¥t</span>
            </div>
          </div>
        </div>
        <div class="table-container">
          <table class="data-table" id="piratesTable">
            <thead>
              <tr>
                <th><input type="checkbox" id="selectAllPirates" onchange="toggleSelectAllPirates(this.checked)"></th>
                <th>STT</th>
                <th>Avatar</th>
                <th>TÃªn</th>
                <th>BÄƒng NhÃ³m</th>
                <th>Bounty</th>
                <th>Cáº¥p Äá»™</th>
                <th>Thao tÃ¡c</th>
              </tr>
            </thead>
            <tbody id="piratesTableBody">
              <!-- Data will be loaded here -->
            </tbody>
          </table>
        </div>
      </section>

      <!-- Tab Content: Crews -->
      <section id="crews-tab" class="tab-content">
        <div class="tab-header">
          <div class="search-box">
            <input type="text" id="crewSearch" placeholder="ğŸ” TÃ¬m kiáº¿m bÄƒng nhÃ³m..." oninput="searchCrews(this.value)">
          </div>
          <button class="add-btn" onclick="openAddCrewModal()">
            <span>â•</span> ThÃªm BÄƒng NhÃ³m
          </button>
        </div>
        <div class="stats-row">
          <div class="stat-card">
            <span class="stat-icon">âš”ï¸</span>
            <div class="stat-info">
              <span class="stat-value" id="totalCrews">0</span>
              <span class="stat-label">Tá»•ng BÄƒng NhÃ³m</span>
            </div>
          </div>
          <div class="stat-card">
            <span class="stat-icon">ğŸ‘¥</span>
            <div class="stat-info">
              <span class="stat-value" id="avgMembers">0</span>
              <span class="stat-label">TB ThÃ nh ViÃªn</span>
            </div>
          </div>
        </div>
        <div class="crews-grid" id="crewsGrid">
          <!-- Crews will be loaded here -->
        </div>
      </section>

      <!-- Tab Content: Ranks -->
      <section id="ranks-tab" class="tab-content">
        <div class="tab-header">
          <h3>âš™ï¸ Cáº¥u hÃ¬nh cÃ¡c cáº¥p Ä‘á»™ bounty</h3>
          <button class="add-btn" onclick="openAddRankModal()">
            <span>â•</span> ThÃªm Cáº¥p Äá»™
          </button>
        </div>
        <div class="ranks-list" id="ranksList">
          <!-- Ranks will be loaded here -->
        </div>
      </section>

      <!-- Tab Content: Accounts -->
      <section id="accounts-tab" class="tab-content">
        <div class="tab-header">
          <div class="search-box">
            <input type="text" id="accountSearch" placeholder="ğŸ” TÃ¬m kiáº¿m tÃ i khoáº£n..." oninput="searchAccounts(this.value)">
          </div>
          <button class="add-btn" onclick="openAddAccountModal()">
            <span>â•</span> ThÃªm TÃ i Khoáº£n
          </button>
        </div>
        <div class="stats-row">
          <div class="stat-card">
            <span class="stat-icon">ğŸ‘¥</span>
            <div class="stat-info">
              <span class="stat-value" id="totalAccounts">0</span>
              <span class="stat-label">Tá»•ng TÃ i Khoáº£n</span>
            </div>
          </div>
          <div class="stat-card">
            <span class="stat-icon">ğŸ‘‘</span>
            <div class="stat-info">
              <span class="stat-value" id="adminAccounts">0</span>
              <span class="stat-label">Admin</span>
            </div>
          </div>
          <div class="stat-card">
            <span class="stat-icon">ğŸ‘¤</span>
            <div class="stat-info">
              <span class="stat-value" id="userAccounts">0</span>
              <span class="stat-label">User</span>
            </div>
          </div>
        </div>
        <div class="table-container">
          <table class="data-table" id="accountsTable">
            <thead>
              <tr>
                <th>STT</th>
                <th>Username</th>
                <th>Email</th>
                <th>ğŸ´â€â˜ ï¸ Háº£i Táº·c</th>
                <th>Vai trÃ²</th>
                <th>Tráº¡ng thÃ¡i</th>
                <th>NgÃ y táº¡o</th>
                <th>Thao tÃ¡c</th>
              </tr>
            </thead>
            <tbody id="accountsTableBody">
              <!-- Data will be loaded here -->
            </tbody>
          </table>
        </div>
      </section>

      <!-- Tab Content: Quests -->
      <section id="quests-tab" class="tab-content">
        <div class="tab-header">
          <div class="search-box">
            <input type="text" id="questSearch" placeholder="ğŸ” TÃ¬m kiáº¿m nhiá»‡m vá»¥..." oninput="searchQuests(this.value)">
          </div>
          <div style="display: flex; gap: 10px;">
            <button class="add-btn" onclick="openAddQuizQuestModal()">
              <span>ğŸ“</span> ThÃªm Nhiá»‡m Vá»¥ Tráº¯c Nghiá»‡m
            </button>
            <button class="add-btn" style="background: linear-gradient(135deg, #9b59b6, #8e44ad);" onclick="openAddSpecialQuestModal()">
              <span>ğŸ“¸</span> ThÃªm Nhiá»‡m Vá»¥ Äáº·c Biá»‡t
            </button>
          </div>
        </div>
        <div class="stats-row">
          <div class="stat-card">
            <span class="stat-icon">ğŸ“</span>
            <div class="stat-info">
              <span class="stat-value" id="totalQuests">0</span>
              <span class="stat-label">Tá»•ng Nhiá»‡m Vá»¥</span>
            </div>
          </div>
          <div class="stat-card">
            <span class="stat-icon">ğŸ“š</span>
            <div class="stat-info">
              <span class="stat-value" id="totalQuestions">0</span>
              <span class="stat-label">Tá»•ng CÃ¢u Há»i</span>
            </div>
          </div>
          <div class="stat-card">
            <span class="stat-icon">ğŸ“</span>
            <div class="stat-info">
              <span class="stat-value" id="avgQuestionsPerQuest">0</span>
              <span class="stat-label">TB CÃ¢u Há»i/Bá»™</span>
            </div>
          </div>
        </div>
        
        <!-- Filter by grade and subject -->
        <div class="quest-filters" style="margin: 20px 0; display: flex; gap: 15px;">
          <div style="flex: 1;">
            <label style="display: block; margin-bottom: 5px; color: #ecf0f1; font-weight: 600;">ğŸ“ Khá»‘i lá»›p:</label>
            <select id="gradeFilter" onchange="filterQuests()" style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #34495e; background: rgba(52, 73, 94, 0.3); color: white;">
              <option value="">Táº¥t cáº£</option>
              <option value="3">Khá»‘i 3</option>
              <option value="4">Khá»‘i 4</option>
              <option value="5">Khá»‘i 5</option>
            </select>
          </div>
          <div style="flex: 1;">
            <label style="display: block; margin-bottom: 5px; color: #ecf0f1; font-weight: 600;">ğŸ“– MÃ´n há»c:</label>
            <select id="subjectFilter" onchange="filterQuests()" style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #34495e; background: rgba(52, 73, 94, 0.3); color: white;">
              <option value="">Táº¥t cáº£</option>
              <option value="tin-hoc">Tin há»c</option>
              <option value="cong-nghe">CÃ´ng nghá»‡</option>
            </select>
          </div>
        </div>
        
        <div class="quests-grid" id="questsGrid">
          <!-- Quests will be loaded here -->
        </div>
      </section>

      <!-- Tab Content: Submissions -->
      <section id="submissions-tab" class="tab-content">
        <div class="tab-header">
          <div class="search-box">
            <input type="text" id="submissionSearch" placeholder="ğŸ” TÃ¬m kiáº¿m bÃ i ná»™p..." oninput="searchSubmissions(this.value)">
          </div>
          <div style="display: flex; gap: 10px;">
            <select id="submissionStatusFilter" onchange="filterSubmissions()" style="padding: 10px 20px; border-radius: 8px; border: 1px solid #34495e; background: rgba(52, 73, 94, 0.5); color: white; font-weight: 600;">
              <option value="">Táº¥t cáº£ tráº¡ng thÃ¡i</option>
              <option value="pending">â³ Chá» duyá»‡t</option>
              <option value="approved">âœ… ÄÃ£ duyá»‡t</option>
              <option value="rejected">âŒ Tá»« chá»‘i</option>
            </select>
          </div>
        </div>
        <div class="stats-row">
          <div class="stat-card">
            <span class="stat-icon">ğŸ“¸</span>
            <div class="stat-info">
              <span class="stat-value" id="totalSubmissions">0</span>
              <span class="stat-label">Tá»•ng BÃ i Ná»™p</span>
            </div>
          </div>
          <div class="stat-card">
            <span class="stat-icon">â³</span>
            <div class="stat-info">
              <span class="stat-value" id="pendingSubmissions">0</span>
              <span class="stat-label">Chá» Duyá»‡t</span>
            </div>
          </div>
          <div class="stat-card">
            <span class="stat-icon">âœ…</span>
            <div class="stat-info">
              <span class="stat-value" id="approvedSubmissions">0</span>
              <span class="stat-label">ÄÃ£ Duyá»‡t</span>
            </div>
          </div>
          <div class="stat-card">
            <span class="stat-icon">âŒ</span>
            <div class="stat-info">
              <span class="stat-value" id="rejectedSubmissions">0</span>
              <span class="stat-label">Tá»« Chá»‘i</span>
            </div>
          </div>
        </div>
        
        <div class="submissions-grid" id="submissionsGrid">
          <!-- Submissions will be loaded here -->
        </div>
      </section>
    </main>
  </div>

  <!-- Modal: Add/Edit Pirate -->
  <div class="modal-overlay" id="pirateModal">
    <div class="modal">
      <div class="modal-header">
        <h3 id="pirateModalTitle">â• ThÃªm Háº£i Táº·c</h3>
        <button class="close-btn" onclick="closeModal('pirateModal')">&times;</button>
      </div>
      <div class="modal-body">
        <form id="pirateForm" onsubmit="savePirate(event)">
          <input type="hidden" id="pirateIndex" value="-1">
          <div class="form-group">
            <label>ğŸ´â€â˜ ï¸ TÃªn Háº£i Táº·c</label>
            <input type="text" id="pirateName" required placeholder="Nháº­p tÃªn háº£i táº·c...">
          </div>
          <div class="form-group">
            <label>âš”ï¸ BÄƒng NhÃ³m</label>
            <select id="pirateCrew" required>
              <!-- Options will be loaded -->
            </select>
          </div>
          <div class="form-group">
            <label>ğŸ’° Bounty</label>
            <input type="number" id="pirateBounty" required min="0" placeholder="Nháº­p sá»‘ tiá»n truy nÃ£...">
          </div>
          <div class="form-group">
            <label>ğŸ–¼ï¸ Avatar</label>
            <div style="display: flex; gap: 10px; align-items: center;">
              <div id="pirateAvatarPreview" style="width: 80px; height: 80px; border-radius: 50%; border: 2px solid #34495e; display: flex; align-items: center; justify-content: center; background: rgba(52, 73, 94, 0.3); font-size: 32px; overflow: hidden;">
                ğŸ“·
              </div>
              <div style="flex: 1;">
                <label class="btn-upload" style="display: inline-block; padding: 10px 20px; background: linear-gradient(135deg, #3498db 0%, #2980b9 100%); color: white; border-radius: 8px; cursor: pointer; margin-bottom: 8px;">
                  ğŸ“ Chá»n áº£nh
                  <input type="file" id="pirateAvatarUpload" accept="image/*" style="display: none;" onchange="previewPirateAvatar(event)">
                </label>
                <input type="text" id="pirateImage" placeholder="Hoáº·c nháº­p URL áº£nh..." style="width: 100%; padding: 8px; border: 1px solid #34495e; border-radius: 5px; background: rgba(52, 73, 94, 0.3); color: white;">
                <button type="button" onclick="clearPirateAvatar()" style="margin-top: 5px; padding: 5px 15px; background: #e74c3c; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 12px;">ğŸ—‘ï¸ XÃ³a áº£nh</button>
              </div>
            </div>
          </div>
          <div class="form-actions">
            <button type="button" class="btn-cancel" onclick="closeModal('pirateModal')">Há»§y</button>
            <button type="submit" class="btn-save">LÆ°u</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Modal: Add/Edit Crew -->
  <div class="modal-overlay" id="crewModal">
    <div class="modal">
      <div class="modal-header">
        <h3 id="crewModalTitle">â• ThÃªm BÄƒng NhÃ³m</h3>
        <button class="close-btn" onclick="closeModal('crewModal')">&times;</button>
      </div>
      <div class="modal-body">
        <form id="crewForm" onsubmit="saveCrew(event)">
          <input type="hidden" id="crewIndex" value="-1">
          <div class="form-group">
            <label>âš”ï¸ TÃªn BÄƒng NhÃ³m</label>
            <input type="text" id="crewName" required placeholder="Nháº­p tÃªn bÄƒng nhÃ³m...">
          </div>
          <div class="form-group">
            <label>ğŸ¨ Icon</label>
            <input type="text" id="crewIcon" required placeholder="Emoji icon (vÃ­ dá»¥: ğŸ´â€â˜ ï¸)">
          </div>
          <div class="form-group">
            <label>ğŸ¨ MÃ u sáº¯c</label>
            <input type="color" id="crewColor" value="#e74c3c">
          </div>
          <div class="form-group">
            <label>ğŸ‘‘ Thuyá»n TrÆ°á»Ÿng</label>
            <input type="text" id="crewCaptain" required placeholder="TÃªn thuyá»n trÆ°á»Ÿng...">
          </div>
          <div class="form-actions">
            <button type="button" class="btn-cancel" onclick="closeModal('crewModal')">Há»§y</button>
            <button type="submit" class="btn-save">LÆ°u</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Modal: Add/Edit Rank -->
  <div class="modal-overlay" id="rankModal">
    <div class="modal">
      <div class="modal-header">
        <h3 id="rankModalTitle">â• ThÃªm Cáº¥p Äá»™</h3>
        <button class="close-btn" onclick="closeModal('rankModal')">&times;</button>
      </div>
      <div class="modal-body">
        <form id="rankForm" onsubmit="saveRank(event)">
          <input type="hidden" id="rankIndex" value="-1">
          <div class="form-group">
            <label>ğŸ·ï¸ Type (ID)</label>
            <input type="text" id="rankType" required placeholder="rookie, pirate, supernova...">
          </div>
          <div class="form-group">
            <label>ğŸ“› TÃªn Hiá»ƒn Thá»‹</label>
            <input type="text" id="rankName" required placeholder="TÃ¢n Binh, Háº£i Táº·c...">
          </div>
          <div class="form-group">
            <label>ğŸ¨ Icon</label>
            <input type="text" id="rankIcon" required placeholder="ğŸ‘¶, ğŸ´â€â˜ ï¸, â­...">
          </div>
          <div class="form-group">
            <label>ğŸ¨ MÃ u sáº¯c</label>
            <input type="color" id="rankColor" value="#95a5a6">
          </div>
          <div class="form-group">
            <label>ğŸ’° Bounty Tá»‘i Thiá»ƒu</label>
            <input type="number" id="rankMinBounty" required min="0" placeholder="0, 80, 180...">
          </div>
          <div class="form-actions">
            <button type="button" class="btn-cancel" onclick="closeModal('rankModal')">Há»§y</button>
            <button type="submit" class="btn-save">LÆ°u</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Modal: Add/Edit Account -->
  <div class="modal-overlay" id="accountModal">
    <div class="modal">
      <div class="modal-header">
        <h3 id="accountModalTitle">â• ThÃªm TÃ i Khoáº£n</h3>
        <button class="close-btn" onclick="closeModal('accountModal')">&times;</button>
      </div>
      <div class="modal-body">
        <form id="accountForm" onsubmit="saveAccount(event)">
          <input type="hidden" id="accountIndex" value="-1">
          <div class="form-group">
            <label>ğŸ‘¤ Username</label>
            <input type="text" id="accountUsername" required placeholder="Nháº­p username...">
          </div>
          <div class="form-group">
            <label>ğŸ“§ Email</label>
            <input type="email" id="accountEmail" required placeholder="Nháº­p email...">
          </div>
          <div class="form-group">
            <label>ğŸ”’ Máº­t kháº©u</label>
            <input type="password" id="accountPassword" placeholder="Nháº­p máº­t kháº©u...">
          </div>
          <div class="form-group">
            <label>ğŸ´â€â˜ ï¸ Háº£i Táº·c LiÃªn Káº¿t</label>
            <select id="accountPirate">
              <option value="">-- KhÃ´ng liÃªn káº¿t --</option>
              <!-- Options will be loaded -->
            </select>
          </div>
          <div class="form-group">
            <label>ğŸ‘‘ Vai trÃ²</label>
            <select id="accountRole" required>
              <option value="user">User</option>
              <option value="moderator">Moderator</option>
              <option value="admin">Admin</option>
            </select>
          </div>
          <div class="form-group">
            <label>ğŸ“Š Tráº¡ng thÃ¡i</label>
            <select id="accountStatus" required>
              <option value="active">Hoáº¡t Ä‘á»™ng</option>
              <option value="inactive">KhÃ´ng hoáº¡t Ä‘á»™ng</option>
              <option value="banned">Bá»‹ cáº¥m</option>
            </select>
          </div>
          <div class="form-actions">
            <button type="button" class="btn-cancel" onclick="closeModal('accountModal')">Há»§y</button>
            <button type="submit" class="btn-save">LÆ°u</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Modal: Add/Edit Quest -->
  <div class="modal-overlay" id="questModal">
    <div class="modal modal-lg">
      <div class="modal-header">
        <h3 id="questModalTitle">â• ThÃªm Nhiá»‡m Vá»¥</h3>
        <button class="close-btn" onclick="closeModal('questModal')">&times;</button>
      </div>
      <div class="modal-body">
        <form id="questForm" onsubmit="saveQuest(event)">
          <input type="hidden" id="questIndex" value="-1">
          <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
            <div class="form-group">
              <label>ğŸ“ TÃªn Nhiá»‡m Vá»¥</label>
              <input type="text" id="questTitle" required placeholder="VÃ­ dá»¥: Kiáº¿n thá»©c cÆ¡ báº£n vá» mÃ¡y tÃ­nh">
            </div>
            <div class="form-group">
              <label>ğŸ“ Khá»‘i lá»›p</label>
              <select id="questGrade" required>
                <option value="">-- Chá»n khá»‘i --</option>
                <option value="3">Khá»‘i 3</option>
                <option value="4">Khá»‘i 4</option>
                <option value="5">Khá»‘i 5</option>
              </select>
            </div>
          </div>
          <div class="form-row" style="display: grid; grid-template-columns: 1fr; gap: 15px;">
            <div class="form-group">
              <label>ğŸ“– MÃ´n há»c</label>
              <select id="questSubject" required>
                <option value="">-- Chá»n mÃ´n --</option>
                <option value="tin-hoc">Tin há»c</option>
                <option value="cong-nghe">CÃ´ng nghá»‡</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label>ğŸ“„ MÃ´ táº£</label>
            <textarea id="questDescription" rows="2" placeholder="MÃ´ táº£ ngáº¯n vá» nhiá»‡m vá»¥..."></textarea>
          </div>
          
          <!-- Hidden type field -->
          <input type="hidden" id="questType" value="quiz">
          
          <hr style="margin: 20px 0; border: none; border-top: 1px solid rgba(255,255,255,0.1);">
          
          <!-- Quiz Type -->
          <div id="quizTypeContainer">
            <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
              <div class="form-group">
                <label>ğŸ’° Äiá»ƒm cá»™ng/cÃ¢u Ä‘Ãºng</label>
                <input type="number" id="questRewardPerQuestion" min="1" placeholder="Bounty khi Ä‘Ãºng" value="100">
              </div>
              <div class="form-group">
                <label>âŒ Äiá»ƒm trá»«/cÃ¢u sai</label>
                <input type="number" id="questPenaltyPerQuestion" min="0" placeholder="Bounty bá»‹ trá»« khi sai" value="50">
              </div>
            </div>
            <div class="form-group">
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                <label style="margin: 0;">ğŸ“š Danh sÃ¡ch CÃ¢u Há»i</label>
                <button type="button" class="add-btn" onclick="addQuestionField()" style="padding: 5px 15px; font-size: 14px;">
                  <span>â•</span> ThÃªm CÃ¢u Há»i
                </button>
              </div>
              <div id="questionsContainer">
                <!-- Questions will be added here -->
              </div>
            </div>
          </div>
          
          <!-- Special Type -->
          <div id="specialTypeContainer" style="display: none;">
            <div class="form-group">
              <label>ğŸ’° Äiá»ƒm tá»‘i Ä‘a</label>
              <input type="number" id="questMaxScore" min="1" placeholder="Äiá»ƒm tá»‘i Ä‘a cÃ³ thá»ƒ Ä‘áº¡t Ä‘Æ°á»£c" value="1000">
            </div>
            <div class="form-group">
              <label>ğŸ“‹ YÃªu cáº§u bÃ i ná»™p (khÃ´ng báº¯t buá»™c)</label>
              <textarea id="questRequirements" rows="4" placeholder="MÃ´ táº£ yÃªu cáº§u bÃ i ná»™p cá»§a há»c sinh...&#10;VÃ­ dá»¥: Chá»¥p áº£nh bÃ i lÃ m trÃªn vá»Ÿ, hoÃ n thÃ nh bÃ i táº­p thá»±c hÃ nh, v.v."></textarea>
            </div>
          </div>
          
          <div class="form-actions">
            <button type="button" class="btn-cancel" onclick="closeModal('questModal')">Há»§y</button>
            <button type="submit" class="btn-save">LÆ°u</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Modal: Review Submission -->
  <div class="modal-overlay" id="reviewSubmissionModal">
    <div class="modal modal-lg">
      <div class="modal-header">
        <h3>ğŸ“¸ Duyá»‡t BÃ i Ná»™p</h3>
        <button class="close-btn" onclick="closeModal('reviewSubmissionModal')">&times;</button>
      </div>
      <div class="modal-body">
        <form id="reviewSubmissionForm" onsubmit="saveSubmissionReview(event)">
          <input type="hidden" id="submissionId" value="">
          
          <div class="submission-info-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px; padding: 15px; background: rgba(52, 73, 94, 0.3); border-radius: 10px;">
            <div>
              <strong style="color: #3498db;">ğŸ‘¤ Há»c sinh:</strong>
              <span id="submissionStudentName"></span>
            </div>
            <div>
              <strong style="color: #3498db;">âš”ï¸ BÄƒng nhÃ³m:</strong>
              <span id="submissionCrewName"></span>
            </div>
            <div>
              <strong style="color: #3498db;">ğŸ“ Nhiá»‡m vá»¥:</strong>
              <span id="submissionQuestTitle"></span>
            </div>
            <div>
              <strong style="color: #3498db;">ğŸ“… NgÃ y ná»™p:</strong>
              <span id="submissionDate"></span>
            </div>
          </div>
          
          <div class="form-group">
            <label>ğŸ–¼ï¸ HÃ¬nh áº£nh bÃ i ná»™p</label>
            <div id="submissionImagesContainer" style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px;">
              <!-- Images will be loaded here -->
            </div>
          </div>
          
          <hr style="margin: 20px 0; border: none; border-top: 1px solid rgba(255,255,255,0.1);">
          
          <div class="form-row" style="display: grid; grid-template-columns: 1fr 2fr; gap: 15px;">
            <div class="form-group">
              <label>ğŸ“Š Tráº¡ng thÃ¡i</label>
              <select id="submissionStatus" required onchange="toggleScoreField()">
                <option value="pending">â³ Chá» duyá»‡t</option>
                <option value="approved">âœ… ÄÃ£ duyá»‡t</option>
                <option value="rejected">âŒ Tá»« chá»‘i</option>
              </select>
            </div>
            <div class="form-group" id="scoreFieldContainer">
              <label>ğŸ’° Äiá»ƒm (Bounty)</label>
              <input type="number" id="submissionScore" min="0" placeholder="Nháº­p Ä‘iá»ƒm cho bÃ i ná»™p">
            </div>
          </div>
          
          <div class="form-group">
            <label>ğŸ’¬ Nháº­n xÃ©t</label>
            <textarea id="submissionFeedback" rows="3" placeholder="Nháº­n xÃ©t cá»§a giÃ¡o viÃªn..."></textarea>
          </div>
          
          <div class="form-actions">
            <button type="button" class="btn-cancel" onclick="closeModal('reviewSubmissionModal')">ÄÃ³ng</button>
            <button type="submit" class="btn-save">LÆ°u Ä‘Ã¡nh giÃ¡</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Confirm Modal -->
  <div class="modal-overlay" id="confirmModal">
    <div class="modal modal-sm">
      <div class="modal-header">
        <h3>âš ï¸ XÃ¡c nháº­n</h3>
        <button class="close-btn" onclick="closeModal('confirmModal')">&times;</button>
      </div>
      <div class="modal-body">
        <p id="confirmMessage">Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n thá»±c hiá»‡n hÃ nh Ä‘á»™ng nÃ y?</p>
        <div class="form-actions">
          <button type="button" class="btn-cancel" onclick="closeModal('confirmModal')">Há»§y</button>
          <button type="button" class="btn-danger" id="confirmBtn">XÃ¡c nháº­n</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast Notification -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <script src="js/firebase-config.js"></script>
  <script src="js/utils.js"></script>
  <script>
    // Firebase Ä‘Ã£ Ä‘Æ°á»£c khá»Ÿi táº¡o bá»Ÿi firebase-config.js
    if (!database) {
      console.error('Database chÆ°a khá»Ÿi táº¡o');
    }
  </script>
  <script src="js/admin.js"></script>
</body>
</html>
